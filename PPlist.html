<!DOCTYPE html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PPlist</title>
<link href="https://williamkpchan.github.io/maincss.css" rel="stylesheet" type="text/css">
<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<script src="https://williamkpchan.github.io/mainscript.js"></script>
<script src="optionsArray.js"></script>

<!--script src="https://code.jquery.com/mobile/1.5.0-alpha.1/jquery.mobile-1.5.0-alpha.1.min.js"></script-->

<style>
body { 
  width: 100%;
  background-color: black;
  color: gray;
  justify-content: center;
  align-content: center;
  font-size: xx-large;
}
#question {text-align: center; font-size: 24px; color: gray;}
.normalsize {font-size: 24px}
.mainFrame {width:100%; background-color: black}
#mychoice {font-size: 20px}
select option { font-size: 18px, line-height: 60%;}
button {color:white;}
a, select {font-size: 24px}
video, img {max-width:100%}
#schRst, #markLst {font-size: 20px}
#jumpButton {font-size: 18px; color: orange;}
#location {font-size: 16px; color: orange;}
#favList {font-size: 16px; color: orange;}
@media only screen and (max-width: 1080px) {
  body { width: 100%;}
  .mainFrame {width:100%; font-size: 24px}
  pre {width:100%; font-size: 24px}
  video, img {max-width:100%}
  button {margin-top: 5px;}
  #schRst, #markLst {font-size: 20px}
  select option { font-size: 18px, line-height: 60%;}
}

        .collectable {
            cursor: context-menu;
            border: 3px solid transparent;
            transition: all 0.3s ease;
        }
        
        .collected {
            border: 3px solid #007bff !important;
            box-shadow: 0 0 10px rgba(0,123,255,0.5);
        }
        
        .status {font-size:14px;
            padding: 10px;
            background: #f8f9fa;
            margin: 10px 0;
            border-radius: 5px;
        }

</style>
</head>

<body onkeypress="chkKey()">
<center>
<h5 id="totalLen">Info cards</h5>
<div class="mainFrame">
<span id="automode"></span>
<button onclick=randQues()><o>rand</o></button>
<button onclick=jpback()>next</button>
<button onclick=window.scrollTo(0,document.body.scrollHeight)><r>end</r></button>
<button onclick=randommyChoice()><pk>randL</pk></button>
<span id="location"></span>
<pre id="question"> </pre><br>

<!--button onclick=speak()>speak</button-->
<button id="jumpButton" onclick=jpButClick()><span id="questionsLeft"></span></button>
<button onclick=gotoQues()>goto</button>
<button onclick=ignoreIt()>ignoreIt</button>
<button onclick=markIt()>markIt</button>
<button onclick=recordIt() class="red">Rec</button>
<button onclick=clearIt() class="gold">Clr</button>
<button onclick=summaryIt() class="white">Show</button>

<button onclick=autojp()><lg>autoF</lg></button>
<button onclick=batchMode()><lg>batch</lg></button>
<button onclick=findkeyword()><y>findkey</y></button>
<button onclick="shuffleSW = !shuffleSW";><pk>shufSW</pk></button>
<button onclick="showlong = !showlong";><y>showlong</y></button>

<button onclick=gototop();><r>top</r></button>

<button onclick=addFav()><o>addFav</o></button>
<button onclick=rmFav()><pp>rmFav</pp></button>
<button onclick=showFav()><y>showFav</y></button>
<button onclick=hideFav()><wh>hideFav</wh></button>
<button onclick=randommyFav()><r>randFav</r></button>

</div>
<span class="normalsize">select card box:</span>
<select id="myChoice" onchange="useChosen()"></select>

</select>
<br>
<button onclick=window.scrollTo(0,Number(document.body.scrollHeight/4))>quad</button>
<button onclick=window.scrollTo(0,Number(document.body.scrollHeight/2))>half</button>
<button onclick=window.scrollTo(0,Number(document.body.scrollHeight*3/4))>3 quad</button>
<button onclick=seekListName();><r>seekListName</r></button>
<br>
<div id="markLst"></div>
<div id="schRst"></div>
<br>

<a href="https://chat.deepseek.com/a/chat/" class="whitebut " target="_blank">deepseek</a>
</center>
<div id="localStorageList"></div>
<div id="favList"></div>

<br>
<div class="status">
<p>Collected: <span id="count">0</span> images</p>
<button onclick="downloadCollected()">ðŸ’¾ Save All to TXT</button>
<button onclick="clearAll()">ðŸ§¹ Clear All</button>
<br>
<span id="statusMessage"></span>
<span id="arrayDisplay"></span>
</div>

<script>
  // Our "buffer" to store image URLs
  const imageBuffer = [];

  // Use event delegation for dynamically added images
  document.addEventListener('contextmenu', function(e) {
      if (e.target.tagName === 'IMG') {
          e.preventDefault(); // Stop default right-click menu
          
          const img = e.target;
          const imgUrl = img.src;
          const index = imageBuffer.indexOf(imgUrl);
          
          if (index === -1) {
              // Add to buffer
              imageBuffer.push(imgUrl);
              img.classList.add('collected');
              console.log(`âœ… Added: ${imgUrl}`);
          } else {
              // Remove from buffer
              imageBuffer.splice(index, 1);
              img.classList.remove('collected');
              console.log(`âŒ Removed: ${imgUrl}`);
          }
          
          // Update counter
          document.getElementById('count').textContent = imageBuffer.length;
      }
  });

  // Download function
  function downloadCollected() {
    if (imageBuffer.length === 0) {
      alert('ðŸ“­ No images collected yet! Right-click some images first.');
      return;
    }

    const content = imageBuffer.join('\n');
    const blob = new Blob([content], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    
    const a = document.createElement('a');
    a.href = url;
    a.download = `collected-images-${new Date().toISOString().split('T')[0]}.txt`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    
    alert(`ðŸŽ‰ Success! Saved ${imageBuffer.length} image URLs to file in download folder!`);
  }

  // Clear all
  function clearAll() {
    imageBuffer.length = 0;
    document.querySelectorAll('.collected').forEach(el => {
      el.classList.remove('collected');
    });
    document.getElementById('count').textContent = '0';
  }


</script>
<script src="pplist.js"></script>

</body>
</html>
